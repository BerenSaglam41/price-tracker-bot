# ğŸ›ï¸ Trendyol Fiyat Takip Botu

Trendyol Ã¼rÃ¼nlerinin fiyatlarÄ±nÄ± otomatik takip eden Telegram botu. Her 5 dakikada bir fiyatlarÄ± kontrol edip dÃ¼ÅŸÃ¼nce bildirim gÃ¶nderir.

## ğŸ“Œ Ã–zellikler

- âœ… Trendyol Ã¼rÃ¼n linklerini takip etme
- âœ… Otomatik fiyat kontrolÃ¼ (her 5 dakika)
- âœ… Fiyat dÃ¼ÅŸÃ¼nce bildirim
- âœ… ÃœrÃ¼n gÃ¶rselleri
- âœ… KÄ±sa linkler (ty.gl) desteÄŸi
- âœ… EÅŸik fiyat belirleme
- âœ… PostgreSQL/SQLite desteÄŸi

## ğŸš€ Kurulum

### Gereksinimler
- Python 3.10+
- pip

### AdÄ±mlar

1. **Virtual environment oluÅŸturun:**
```bash
python -m venv .venv
source .venv/bin/activate
```

2. **BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kleyin:**
```bash
pip install -r requirements.txt
```

3. **Bot token alÄ±n:**
- Telegram'da @BotFather'Ä± aÃ§Ä±n
- /newbot komutu ile bot oluÅŸturun
- Token'Ä± kopyalayÄ±n

4. **.env dosyasÄ± oluÅŸturun:**
```bash
cp .env.example .env
```

.env dosyasÄ±nÄ± dÃ¼zenleyin:
```
BOT_TOKEN=your_bot_token_here
DATABASE_URL=sqlite+aiosqlite:///./price_tracker.db
# WEBHOOK_URL boÅŸ bÄ±rakÄ±n - local'de polling kullanÄ±lÄ±r
```

5. **Database'i hazÄ±rlayÄ±n:**
```bash
python init_db.py
```

6. **Botu baÅŸlatÄ±n:**
```bash
./run.sh
# veya
python -m src.price_tracker_bot.main
```

**Not:** Local geliÅŸtirmede WEBHOOK_URL boÅŸ kalÄ±r, bot otomatik olarak polling modunu kullanÄ±r.

## ğŸ“± KullanÄ±m

### Komutlar
- `/start` - Botu baÅŸlat
- `/add <link>` - ÃœrÃ¼n ekle
- `/list` - ÃœrÃ¼nleri listele

### Ã–rnek
```
/add https://www.trendyol.com/urun-p-12345
/add https://ty.gl/xxxxx
/list
```

## ğŸ—‚ï¸ Proje YapÄ±sÄ±

```
price-tracker-bot/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ price_tracker_bot/
â”‚       â”œâ”€â”€ main.py              # Ana uygulama
â”‚       â”œâ”€â”€ config.py            # YapÄ±landÄ±rma
â”‚       â”œâ”€â”€ bot/
â”‚       â”‚   â”œâ”€â”€ handlers/        # Komut handler'larÄ±
â”‚       â”‚   â”œâ”€â”€ keyboards.py     # Inline klavyeler
â”‚       â”‚   â””â”€â”€ middlewares/     # Middleware'ler
â”‚       â”œâ”€â”€ db/
â”‚       â”‚   â”œâ”€â”€ models.py        # VeritabanÄ± modelleri
â”‚       â”‚   â””â”€â”€ repo/            # Repository pattern
â”‚       â””â”€â”€ services/
â”‚           â””â”€â”€ product_enrichment.py  # Trendyol scraper
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## ğŸ› ï¸ Teknolojiler

- **aiogram 3.x** - Telegram Bot framework
- **SQLAlchemy 2.x** - ORM
- **APScheduler 3.x** - Otomatik fiyat kontrolÃ¼
- **aiosqlite / asyncpg** - SQLite / PostgreSQL
- **httpx** - HTTP client
- **BeautifulSoup4** - HTML parsing

## ğŸš€ Cloud'a Deploy (Ãœcretsiz)

### Render.com (Ã–nerilen)

#### AdÄ±m 1: PostgreSQL Database OluÅŸtur
1. [Render.com](https://render.com)'a giriÅŸ yap
2. "New +" â†’ "PostgreSQL" seÃ§
3. Database adÄ±: `price-tracker-db`
4. Plan: Free
5. Create Database

#### AdÄ±m 2: Web Service OluÅŸtur
1. "New +" â†’ "Web Service" seÃ§
2. Bu GitHub repo'yu baÄŸla
3. Ayarlar:
   - **Name**: `price-tracker-bot`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `python -m src.price_tracker_bot.main`

#### AdÄ±m 3: Environment Variables
Dashboard'da Environment variables ekle:
- `BOT_TOKEN`: Telegram bot token'Ä±n (BotFather'dan)
- `WEBHOOK_URL`: `https://YOUR-APP-NAME.onrender.com` (App URL'inizi buraya yazÄ±n)
- `DATABASE_URL`: PostgreSQL database'den otomatik baÄŸlanacak

#### AdÄ±m 4: Deploy Et!
- "Create Web Service" butonuna tÄ±kla
- Ä°lk deploy ~5 dakika sÃ¼rer
- Bot otomatik olarak database tablolarÄ±nÄ± oluÅŸturacak
- Health check: `https://YOUR-APP-NAME.onrender.com/health`

**Ã–nemli Notlar:**
- âœ… Webhook modu kullanÄ±ldÄ±ÄŸÄ± iÃ§in Render'da dÃ¼zgÃ¼n Ã§alÄ±ÅŸÄ±r
- âœ… Database tablolarÄ± otomatik oluÅŸturulur
- âœ… Ãœcretsiz tier ile 7/24 Ã§alÄ±ÅŸÄ±r
- âš ï¸ Free tier 15 dakika inaktivite sonrasÄ± uyur, webhook gelince uyanÄ±r

### Alternatifler

- **fly.io**: Telegram botlar iÃ§in popÃ¼ler
- **Railway**: Kolay deploy, $5 Ã¼cretsiz credit
- **Koyeb**: Kolay deploy

## ğŸ‘¤ GeliÅŸtirici

Mustafa Beren - Ã–ÄŸrenci Projesi

---

â­ Projeyi beÄŸendiyseniz yÄ±ldÄ±z vermeyi unutmayÄ±n!
